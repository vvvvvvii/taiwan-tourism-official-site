{"version":3,"sources":["webpack:///./src/views/AttractionList.vue","webpack:///./src/views/AttractionList.vue?524b"],"names":["class","changeSearchSpotOption","optionListShow","showOptions","optionListContent","cities","city","key","filterSpot","spot","spotIndex","ID","href","title","Name","src","Picture","PictureUrl1","alt","PictureDescription1","City","length","data","scenicSpots","searchSpotOption","props","methods","getAllScenicSpotData","this","axios","get","headers","getAuthorizationHeader","then","res","filter","Object","keys","forEach","includes","Address","split","Classes","Class1","push","Class2","Class3","catch","err","console","log","GMTString","Date","toGMTString","ShaObj","setHMACKey","update","HMAC","getHMAC","Authorization","e","target","innerHTML","i","parentNode","children","classList","remove","value","add","computed","filterArr","searchPropsContent","searchSpotPropsOption","Description","created","__exports__","render"],"mappings":"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","file":"js/chunk-2d2105af.b607f00e.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- 選單 -->\n    <div class=\"section\">\n      <p class=\"mb-10\">\n        首頁\n        <i class=\"bi bi-chevron-right ms-4\"></i>\n        <span class=\"ms-4 pb-1 border-bottom border-dark\">人氣景點探索</span>\n      </p>\n      <h2 class=\"fs-xxxl fw-bold text-center mb-4\">景點列表</h2>\n      <p class=\"fs-lg text-center mb-10\">地點</p>\n      <ul class=\"d-flex justify-content-center\" @click=\"changeSearchSpotOption\">\n        <li\n          class=\"btn btn-lg btn-outline-warning fs-lg position-relative\"\n          :class=\"{ active: optionListShow }\"\n          @click=\"showOptions\"\n        >\n          <div class=\"d-flex\">\n            <p class=\"fs-md\">{{ optionListContent }}</p>\n            <i class=\"bi bi-chevron-down ms-10\"></i>\n          </div>\n          <ul v-show=\"optionListShow\" class=\"navbar-option-list\">\n            <li v-for=\"city in cities\" :key=\"city\">{{ city }}</li>\n          </ul>\n        </li>\n        <li class=\"btn btn-sm btn-outline-warning fs-lg ms-10\">熱門景點</li>\n        <li class=\"btn btn-sm btn-outline-warning fs-lg ms-5\">網美景點</li>\n        <li class=\"btn btn-sm btn-outline-warning fs-lg ms-5\">戶外景點</li>\n        <li class=\"btn btn-sm btn-outline-warning fs-lg ms-5\">運動景點</li>\n        <li class=\"btn btn-sm btn-outline-warning fs-lg ms-5\">DIY 景點</li>\n      </ul>\n    </div>\n    <!-- 列表 -->\n    <div class=\"section pt-0\">\n      <div class=\"row\">\n        <template v-for=\"(spot, spotIndex) in filterSpot\" :key=\"spot.ID\">\n          <div class=\"col-4\" :class=\"{ 'mb-10': spotIndex < 9 }\" v-if=\"spotIndex < 12\">\n            <a href=\"#\" :title=\"spot.Name\" class=\"text-dark\">\n              <div class=\"position-relative mb-4\">\n                <img\n                  :src=\"spot.Picture.PictureUrl1\"\n                  :alt=\"spot.Picture.PictureDescription1\"\n                  class=\"card-img\"\n                />\n                <h4 class=\"card-img-title\">{{ spot.City }}</h4>\n              </div>\n              <p class=\"fs-md text-center\">{{ spot.Name }}</p>\n            </a>\n          </div>\n        </template>\n      </div>\n      <p v-if=\"filterSpot.length === 0\" class=\"text-center fs-lg text-success\">暫無資料</p>\n    </div>\n    <!-- 頁碼 -->\n    <div\n      class=\"section d-flex justify-content-center align-items-center pt-0\"\n      :class=\"{ 'd-none': filterSpot.length === 0 }\"\n    >\n      <div class=\"btn btn-success btn-pagination\">\n        <i class=\"bi bi-chevron-left\"></i>\n      </div>\n      <p class=\"ms-10\">1/4</p>\n      <div class=\"btn btn-success btn-pagination ms-10\">\n        <i class=\"bi bi-chevron-right\"></i>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport JsSHA from 'jssha';\n\nexport default {\n  data() {\n    return {\n      scenicSpots: [],\n      cities: [\n        '基隆市',\n        '台北市',\n        '新北市',\n        '桃園縣',\n        '新竹市',\n        '新竹縣',\n        '苗栗縣',\n        '台中市',\n        '彰化縣',\n        '南投縣',\n        '雲林縣',\n        '嘉義市',\n        '嘉義縣',\n        '台南市',\n        '高雄市',\n        '屏東縣',\n        '台東縣',\n        '花蓮縣',\n        '宜蘭縣',\n        '澎湖縣',\n        '金門縣',\n        '連江縣',\n      ],\n      optionListShow: false,\n      optionListContent: '地區',\n      searchSpotOption: '',\n    };\n  },\n  props: ['searchPropsContent', 'searchSpotPropsOption'],\n  methods: {\n    // 取得、整理景點資料\n    getAllScenicSpotData() {\n      this.axios\n        .get('https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$format=JSON', {\n          headers: this.getAuthorizationHeader(),\n        })\n        .then((res) => {\n          this.scenicSpots = res.data;\n          // 沒照片的刪掉\n          this.scenicSpots = this.scenicSpots.filter(\n            (spot) => Object.keys(spot.Picture).length !== 0,\n          );\n          this.scenicSpots.forEach((spot, spotIndex) => {\n            // 如果沒有 City 屬性，補上去\n            if (Object.keys(spot).includes('City') === false) {\n              this.scenicSpots[spotIndex].City = spot.Address.includes('縣')\n                ? `${spot.Address.split('縣')[0]}縣`\n                : `${spot.Address.split('市')[0]}市`;\n            }\n            // 若景點有 Class1 / Class2 / Class3 把景點的分類放進 scenicSpots 自建陣列 Classes\n            this.scenicSpots[spotIndex].Classes = [];\n            if (spot.Class1) {\n              this.scenicSpots[spotIndex].Classes.push(spot.Class1);\n            }\n            if (spot.Class2) {\n              this.scenicSpots[spotIndex].Classes.push(spot.Class2);\n            }\n            if (spot.Class3) {\n              this.scenicSpots[spotIndex].Classes.push(spot.Class3);\n            }\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    // api header setting\n    getAuthorizationHeader() {\n      const GMTString = new Date().toGMTString();\n      const ShaObj = new JsSHA('SHA-1', 'TEXT');\n      ShaObj.setHMACKey(process.env.VUE_APP_PATH, 'TEXT');\n      ShaObj.update(`x-date: ${GMTString}`);\n      const HMAC = ShaObj.getHMAC('B64');\n      const Authorization = `hmac username=\"${process.env.VUE_APP_API}\",algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"${HMAC}\"`;\n      return { Authorization, 'X-Date': GMTString };\n    },\n    showOptions() {\n      this.optionListShow = !this.optionListShow;\n    },\n    changeSearchSpotOption(e) {\n      if (e.target.innerHTML.length <= 6 && e.target.innerHTML.length > 3) {\n        // 點了「地點」以外的景點種類選項\n        for (let i = 1; i < 5; i += 1) {\n          if (e.target.parentNode.children[i] !== e.target) {\n            e.target.parentNode.children[i].classList.remove('active');\n          }\n        }\n        // 不是 e.target 的 remove 掉\n        if (e.target.classList.value.includes('active')) {\n          // 已經點過\n          e.target.classList.remove('active');\n          this.searchSpotOption = '';\n        } else {\n          // 還沒點過\n          e.target.classList.add('active');\n          this.searchSpotOption = e.target.innerHTML;\n        }\n      } else if (e.target.innerHTML.length === 3) {\n        // 代表點了「地點」\n        this.optionListContent = e.target.innerHTML;\n      }\n    },\n  },\n  computed: {\n    filterSpot() {\n      let filterArr;\n      if (this.optionListContent === '地區' && this.searchPropsContent === '') {\n        filterArr = this.scenicSpots;\n      } else if (this.searchPropsContent !== '') {\n        // 有輸搜尋欄時，先篩地點\n        filterArr = this.scenicSpots.filter((spot) => spot.Name.includes(this.searchPropsContent));\n      } else {\n        // 有選地點時，先篩地點\n        filterArr = this.scenicSpots.filter((spot) => spot.City.includes(this.optionListContent));\n      }\n      if (this.searchSpotOption === '熱門景點' || this.searchSpotPropsOption === '熱門景點') {\n        filterArr = filterArr.filter(\n          (spot) => spot.Description && spot.Description.includes('熱門'),\n        );\n      } else if (\n        this.searchSpotOption === '網美景點'\n        || this.searchSpotPropsOption === '網美景點'\n      ) {\n        filterArr = filterArr.filter(\n          (spot) => spot.Classes\n            && (spot.Classes.includes('都會公園類')\n              || spot.Classes.includes('溫泉類')\n              || spot.Classes.includes('文化類')),\n        );\n      } else if (\n        this.searchSpotOption === '戶外景點'\n        || this.searchSpotPropsOption === '戶外景點'\n      ) {\n        filterArr = filterArr.filter(\n          (spot) => spot.Classes\n            && (spot.Classes.includes('自然風景類') || spot.Classes.includes('生態類')),\n        );\n      } else if (\n        this.searchSpotOption === '運動景點'\n        || this.searchSpotPropsOption === '運動景點'\n      ) {\n        filterArr = filterArr.filter((spot) => spot.Classes && spot.Classes.includes('體育健身類'));\n      } else if (\n        this.searchSpotOption === 'DIY 景點'\n        || this.searchSpotPropsOption === 'DIY 景點'\n      ) {\n        filterArr = filterArr.filter((spot) => spot.Classes && spot.Classes.includes('觀光工廠類'));\n      }\n      return filterArr;\n    },\n  },\n  created() {\n    this.getAllScenicSpotData();\n  },\n};\n</script>\n","import { render } from \"./AttractionList.vue?vue&type=template&id=78134772\"\nimport script from \"./AttractionList.vue?vue&type=script&lang=js\"\nexport * from \"./AttractionList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/weiliu/Desktop/PROJECT/taiwan-tourism-official-site/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}